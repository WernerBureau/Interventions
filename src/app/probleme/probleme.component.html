<br/>
<div class='container'>
  <div class="card ">
    <div class="card-header bg-secondary text-white">
      Déclarer un problème
    </div>
    <div class="card-body">
      <h5 class="card-title">Veuillez renseigner les zones suivantes et soumettre votre demande</h5>
      <div class="card-text">
        <form class="form-horizontal"
        novalidate
        (ngSubmit)="save()"
        [formGroup]="problemeForm">
          <div class="form-group row">
            <label for="prenomUtilisateurId" class="col-md-2 col-form-label text-right">Prénom :</label>
            <div class="col-sm-10">
              <input class = "form-control"
              id="prenomUtilisateurId"
              type="text"
              placeholder="Votre prénom ici (obligatoire)"
              formControlName="prenomUtilisateur"
              [ngClass]="{
              'is-valid': 
                    (problemeForm.get('prenomUtilisateur').touched ||
                    problemeForm.get('prenomUtilisateur').dirty) &&
                    !problemeForm.get('prenomUtilisateur').errors,

              'is-invalid': 
                    (problemeForm.get('prenomUtilisateur').touched ||
                    problemeForm.get('prenomUtilisateur').dirty) &&
                    problemeForm.get('prenomUtilisateur').errors
              }"/>

              <span class= "form-text" *ngIf="(problemeForm.get('prenomUtilisateur').touched ||
                problemeForm.get('prenomUtilisateur').dirty) &&
                problemeForm.get('prenomUtilisateur').errors">

                <span *ngIf="!problemeForm.get('prenomUtilisateur').errors.longueurMinimum">
                  <small class="text-muted">
                  Veuillez entrer plus de caractères.
                  </small>
                </span>

                <span *ngIf="!problemeForm.get('prenomUtilisateur').errors.sansEspaces">
                  <small class="text-muted">
                  Merci de saisir votre prénom.
                  </small>
                </span>
              </span>
            </div>
          </div> 

          <div class="form-group row">
            <label for="nomUtilisateurId" class="col-md-2 col-form-label text-right">Nom :</label>
            <div class="col-sm-10">
              <input class = "form-control"
              id="nomUtilisateurId"
              type="text"
              placeholder="Votre nom ici (obligatoire)"
              formControlName="nomUtilisateur"
              [ngClass]="{
              'is-valid': 
                    (problemeForm.get('nomUtilisateur').touched ||
                    problemeForm.get('nomUtilisateur').dirty) &&
                    !problemeForm.get('nomUtilisateur').errors,

              'is-invalid': 
                    (problemeForm.get('nomUtilisateur').touched ||
                    problemeForm.get('nomUtilisateur').dirty) &&
                    problemeForm.get('nomUtilisateur').errors
              }"/>

              <span class= "form-text" *ngIf="(problemeForm.get('nomUtilisateur').touched ||
                problemeForm.get('nomUtilisateur').dirty) &&
                problemeForm.get('nomUtilisateur').errors">
                <span *ngIf="!problemeForm.get('nomUtilisateur').errors.longueurMinimum">
                  <small class="text-muted">
                  Veuillez entrer plus de caractères.
                  </small>
                </span>

                <span *ngIf="!problemeForm.get('nomUtilisateur').errors.sansEspaces">
                  <small class="text-muted">
                  Merci de saisir votre nom.
                  </small>
                </span>
              </span>
            </div>
          </div> 

          <div class="form-group row">
            <label for="noTypeProblemeId" class ="col-md-2 col-form-label text-right">Type de problème :</label>
            <div class="col-sm-10">
              <select class="form-control"
              id="noTypeProblemeId"
              formControlName="noTypeProbleme"
              [ngClass]="{
                'is-valid': 
                    (problemeForm.get('noTypeProbleme').touched ||
                      problemeForm.get('noTypeProbleme').dirty) &&
                      !problemeForm.get('noTypeProbleme').errors,
    
                'is-invalid': 
                    (problemeForm.get('noTypeProbleme').touched ||
                      problemeForm.get('noTypeProbleme').dirty) &&
                      problemeForm.get('noTypeProbleme').errors
                }">

                <option value="">Sélectionner un type de problème (obligatoire)...</option>
                <option *ngFor="let type of typeProbleme" [value]="type.id">{{type.descriptionTypeProbleme}}</option>
              </select>

              <span class= "form-text" *ngIf="(problemeForm.get('noTypeProbleme').touched ||
                problemeForm.get('noTypeProbleme').dirty) &&
                problemeForm.get('noTypeProbleme').errors">
                <span *ngIf="!problemeForm.get('noTypeProbleme').required">
                  <small class="text-muted">
                  Merci de sélectionner un type de problème.
                  </small>
                </span>
              </span>

            </div>
          </div>

          <!-- Boutons radio -->
          <div class="form-group row">
          <div class="col-md-2"></div>
            <label for="NotificationId" class="col-md-10 col-form-label">Notifiez-moi pour le statut de ma demande : </label>
            <div class="col-md-2"></div>
            <div class="col-md-10">
              <label class="radio-inline">
                <input type = "radio"
                      value = "NePasMeNotifier"
                      id="notificationId"
                      formControlName="notification">&nbsp;Ne pas me notifier
              </label>
              &nbsp;&nbsp;&nbsp;
              <label class="radio-inline">
                <input type = "radio"
                      value = "ParCourriel"
                      id="notificationId"
                      formControlName="notification">&nbsp;Par courriel
              </label>
              &nbsp;&nbsp;&nbsp;
              <label class ="radio-inline">
                <input type = "radio"
                        value = "ParTelephone"
                        id="notificationId"
                        formControlName="notification">&nbsp;Par message texte
              </label>
            </div>
            </div>

          <!-- Zone de texte telephone -->
          <div class="form-group row">
              <label for="telephoneId" class="col-md-2 col-form-label text-right">Téléphone (SMS) : </label>
              <!--Indiquer le formGroupName pour avoir accès à formControlName-->
              <div class="col-sm-10">
                <input class="form-control"
                      id="telephoneId"
                      type="text"
                      placeholder="Entrez 10 chiffres seulement. Par exemple 5141118888"
                      formControlName="zoneTelephone"
                      [ngClass]="{
                        'is-valid': 
                              (problemeForm.get('zoneTelephone').touched ||
                              problemeForm.get('zoneTelephone').dirty) &&
                              !problemeForm.get('zoneTelephone').errors,
            
                        'is-invalid': 
                              (problemeForm.get('zoneTelephone').touched ||
                              problemeForm.get('zoneTelephone').dirty) &&
                              problemeForm.get('zoneTelephone').errors
                        }"/>
            
                        <span class= "form-text" *ngIf="(problemeForm.get('zoneTelephone').touched ||
                          problemeForm.get('zoneTelephone').dirty) &&
                          problemeForm.get('zoneTelephone').errors">
                          <span *ngIf="problemeForm.get('zoneTelephone').errors.minlength">
                              <small class="text-muted">
                              Veuillez entrer plus de caractères.
                              </small>
                          </span>

                          <span *ngIf="problemeForm.get('zoneTelephone').errors.maxlength">
                              <small class="text-muted">
                              Veuillez entrer moins de caractères.
                              </small>
                          </span>

                          <span *ngIf="problemeForm.get('zoneTelephone').errors.pattern">
                              <small class="text-muted">
                              Merci d'entrer seulement des chiffres.
                              </small>
                          </span>

                          <span *ngIf="problemeForm.get('zoneTelephone').errors.required">
                              <small class="text-muted">
                              Merci de saisir votre numéro de téléphone.
                              </small>
                          </span>
                        </span>
              </div>
            </div>
          
          <!-- Zone de texte courriel -->
          <div class="form-group row">
            <label for="courrielId" class="col-md-2 col-form-label text-right">Adresse courriel : </label>
            <!--Indiquer le formGroupName pour avoir accès à formControlName-->
            <div class="col-sm-10" formGroupName="courrielGroup">
              <input class="form-control"
                    id="courrielId"
                    type="text"
                    placeholder="Courriel (obligatoire si notification par courriel)"
                    formControlName="zoneCourriel"
                    [ngClass]="{
                      'is-valid': 
                            (problemeForm.get('courrielGroup.zoneCourriel').touched ||
                            problemeForm.get('courrielGroup.zoneCourriel').dirty) &&
                            !problemeForm.get('courrielGroup.zoneCourriel').errors,
          
                      'is-invalid': 
                            (problemeForm.get('courrielGroup.zoneCourriel').touched ||
                            problemeForm.get('courrielGroup.zoneCourriel').dirty) &&
                            problemeForm.get('courrielGroup.zoneCourriel').errors
                      }"/>

                      <span class= "form-text" *ngIf="(problemeForm.get('courrielGroup.zoneCourriel').touched ||
                          problemeForm.get('courrielGroup.zoneCourriel').dirty) &&
                          problemeForm.get('courrielGroup.zoneCourriel').errors">

                          <span *ngIf="problemeForm.get('courrielGroup.zoneCourriel').errors.required">
                              <small class="text-muted">
                              Merci d'entrer votre adresse électronique.
                              </small>
                          </span>

                          <span *ngIf="problemeForm.get('courrielGroup.zoneCourriel').errors.pattern">
                              <small class="text-muted">
                              S.V.P. entrer les informations dans un format valide.
                              </small>
                          </span>

                      </span>
            </div>
          </div>

          <!-- Zone de texte confirmer courriel -->
          <div class="form-group row">
              <label for="confirmerCourrielId" class="col-md-2 col-form-label text-right">Confirmer courriel : </label>
              <!--Indiquer le formGroupName pour avoir accès à formControlName-->
              <div class="col-sm-10" formGroupName="courrielGroup">
                <input class="form-control"
                id="confirmerCourrielId"
                type="text"
                placeholder="Entrez à nouveau le courriel (obligatoire si notification par courriel)"
                formControlName="zoneVerifCourriel"
                [ngClass]="{
                  'is-valid': 
                  (problemeForm.get('courrielGroup.zoneVerifCourriel').touched ||
                    problemeForm.get('courrielGroup.zoneVerifCourriel').dirty) &&
                    problemeForm.get('courrielGroup.zoneVerifCourriel').valid,

                  'is-invalid': 
                  (problemeForm.get('courrielGroup.zoneVerifCourriel').touched ||
                  problemeForm.get('courrielGroup.zoneVerifCourriel').dirty) &&
                  !problemeForm.get('courrielGroup.zoneVerifCourriel').valid ||
                  problemeForm.get('courrielGroup').errors?.courrielConfirmation
                  }"/>
                  
                  <span class= "form-text" *ngIf=
                    "(problemeForm.get('courrielGroup.zoneVerifCourriel').touched ||
                      problemeForm.get('courrielGroup.zoneVerifCourriel').dirty) &&
                      problemeForm.get('courrielGroup.zoneVerifCourriel').errors ||
                      problemeForm.get('courrielGroup').errors">

                      <span *ngIf="problemeForm.get('courrielGroup.zoneVerifCourriel').errors?.required">
                          <small class="text-muted">
                          Merci d'entrer votre adresse électronique.
                          </small>
                      </span>

                      <span *ngIf="problemeForm.get('courrielGroup').errors?.courrielConfirmation">
                          <small class="text-muted">
                          Le courriel de confirmation n'est pas le même que le courriel. Le corriger.
                          </small>
                      </span>
                  </span>
                </div>
            </div>
            
          <!-- Zone de texte # Unité  -->        
            <div class="form-group row">          
              <label for="noUniteId" class="col-md-2 col-form-label text-right"># Unité :</label>
              <div class="col-md-10">
                <input class="form-control" 
                id="noUniteId" 
                type="text" 
                placeholder="Numéro de l'unité si connu" 
                formControlName="noUnite" />
              </div>
            </div>      

          <!-- Zone de texte DESCRIPTION DU PROBLÈME  -->        
          <div class="form-group row">          
            <label for="descriptionProblemeId" class="col-md-2 col-form-label text-right">Description du problème :</label>
            <div class="col-md-10">
              <textarea class="form-control" 
              rows="3"              
              id="descriptionProblemeId" 
              type="text" 
              placeholder="Décrire le propblème ici (obligatoire)" 
              formControlName="descriptionProbleme"            
              [ngClass]="{'is-valid': 
                        (problemeForm.get('descriptionProbleme').touched || problemeForm.get('descriptionProbleme').dirty) &&
                          problemeForm.get('descriptionProbleme').valid, 
                          'is-invalid': 
                        (problemeForm.get('descriptionProbleme').touched || problemeForm.get('descriptionProbleme').dirty) &&
                        !problemeForm.get('descriptionProbleme').valid }">
              </textarea>

              <span class="form-text" *ngIf="(problemeForm.get('descriptionProbleme').touched || 
                problemeForm.get('descriptionProbleme').dirty) && 
                problemeForm.get('descriptionProbleme').errors">

                <span *ngIf="problemeForm.get('descriptionProbleme').errors.required">
                  <small  class="text-muted">
                    N'oubliez pas de décrire le plus clairement possible le problème rencontré.
                  </small>
                </span> 

                <span *ngIf="problemeForm.get('descriptionProbleme').errors.minlength">
                  <small  class="text-muted">
                  La description du problème doit comporter au moins 5 caractères.
                  </small> 
                </span>       
              </span>
            </div>
          </div>

          <!-- Zone de texte # Unité  -->        
          <div class="form-group row">          
            <label for="dateProblemeId" class="col-md-2 col-form-label text-right">Date :</label>
            <div class="col-md-10">
              <input class="form-control" 
              id="dateProblemeId" 
              type="text" 
              formControlName="dateProbleme" />
            </div>
          </div> 
      </form>

      <!-- Bouton sauvegarder -->
      <div class="form-group row">
        <div class="col-md-2"></div>
        <div class="col-md-10">
          <span>
            <button class="btn btn-primary"
            type="submit"
            [disabled]="!problemeForm.valid">
            <fa name="save"></fa>
            &nbsp;&nbsp;Sauvegarder
            </button>
          </span>
        </div>
      </div>
    </div>
  </div>
</div>